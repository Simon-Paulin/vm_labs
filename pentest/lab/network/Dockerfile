FROM kali-base:latest

# ===========================================
# Métadonnées
# ===========================================
LABEL maintainer="pentest-lab"
LABEL description="Module Kali Network (Outils réseau)"

# ===========================================
# Installation des outils réseau
# ===========================================
USER root
RUN apt-get update && \
    apt-get install -y \
        tcpdump \
        traceroute \
        iproute2 \
        iptables \
        netcat-traditional \
        net-tools \
        dnsutils \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*

# ===========================================
# Bannière
# ===========================================
RUN sed -i '/Pentest Lab - Module BASE/,+15d' /home/kali/.bashrc && \
    echo '\
BLUE="\\033[0;34m"\n\
GREEN="\\033[0;32m"\n\
YELLOW="\\033[0;33m"\n\
NC="\\033[0m"\n\
\n\
echo -e "${BLUE}=====================================${NC}"\n\
echo -e "${GREEN}   🌐 Pentest Lab - Module NETWORK${NC}"\n\
echo -e "${BLUE}=====================================${NC}"\n\
echo ""\n\
echo -e "${YELLOW}Outils disponibles :${NC}"\n\
echo " - 📡 Ping/Traceroute : $$(ping -V 2>&1 | head -n1), $$(traceroute --version 2>&1 | head -n1)"\n\
echo " - 🧪 Tcpdump         : $$(tcpdump --version | head -n1)"\n\
echo " - 🔧 Iproute2        : $$(ip -V)"\n\
echo " - 🧱 Iptables        : $$(iptables --version)"\n\
echo " - 🌍 Netcat          : $$(nc -h 2>&1 | head -n1)"\n\
echo " - 🛠️ Net-tools       : ifconfig, netstat, etc."\n\
echo " - 📖 Dnsutils        : dig/nslookup/bind-tools"\n\
echo ""\n\
echo -e "${YELLOW}Files :${NC} /workspace"\n\
echo -e "${YELLOW}User        :${NC} kali"\n\
echo -e "${BLUE}=====================================${NC}"\n\
' >> /home/kali/.bashrc

# ===========================================
# Configuration utilisateur final
# ===========================================
USER kali
WORKDIR /workspace

CMD ["/bin/bash"]
